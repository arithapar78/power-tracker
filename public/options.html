<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Power Tracker Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container" data-theme="dark">
    <!-- Theme Toggle -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode" title="Switch theme">
      <span class="theme-icon">‚òÄÔ∏è</span>
    </button>

    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <img src="icon-48.png" alt="Power Tracker" class="logo" id="optionsLogo">
        <div class="header-text">
          <h1>Power Tracker Settings</h1>
          <p>Configure your browser energy monitoring preferences</p>
        </div>
      </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="nav-tabs">
      <button class="nav-tab active" data-tab="settings">Settings</button>
      <button class="nav-tab" data-tab="backend-energy">Backend Energy</button>
      <button class="nav-tab" data-tab="history">History</button>
      <button class="nav-tab" data-tab="insights">Insights</button>
      <button class="nav-tab" data-tab="learntav">LearnTAV</button>
      <button class="nav-tab" data-tab="about">About</button>
    </nav>

    <!-- Settings Tab -->
    <div class="tab-content" id="settings-tab">
      <div class="settings-grid">
        <!-- Tracking Settings Card -->
        <div class="setting-card">
          <div class="card-header">
            <h2>‚ö° Tracking Settings</h2>
          </div>
          <div class="card-content">
            <div class="setting-item">
              <div class="setting-row">
                <div class="setting-info">
                  <label for="trackingEnabled" class="setting-label">Enable Energy Tracking</label>
                  <p class="setting-description">Monitor energy consumption across all browser tabs</p>
                </div>
                <div class="setting-control">
                  <input type="checkbox" id="trackingEnabled" class="toggle-switch">
                </div>
              </div>
            </div>

            <div class="setting-item">
              <div class="setting-row">
                <div class="setting-info">
                  <label for="samplingInterval" class="setting-label">Sampling Interval</label>
                  <p class="setting-description">How frequently to collect energy metrics</p>
                </div>
                <div class="setting-control">
                  <select id="samplingInterval" class="setting-select">
                    <option value="1000">1 second (High accuracy)</option>
                    <option value="5000">5 seconds (Recommended)</option>
                    <option value="10000">10 seconds (Low impact)</option>
                    <option value="30000">30 seconds (Minimal)</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="setting-item">
              <div class="setting-row">
                <div class="setting-info">
                  <label for="dataRetentionDays" class="setting-label">Data Retention</label>
                  <p class="setting-description">How long to keep historical energy data</p>
                </div>
                <div class="setting-control">
                  <input type="range" id="dataRetentionDays" min="1" max="90" class="setting-slider">
                  <span class="slider-value" id="retentionValue">30 days</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Notifications Card -->
        <div class="setting-card">
          <div class="card-header">
            <h2>üîî Notifications</h2>
          </div>
          <div class="card-content">
            <div class="setting-item">
              <div class="setting-row">
                <div class="setting-info">
                  <label for="notificationsEnabled" class="setting-label">Enable Notifications</label>
                  <p class="setting-description">Show alerts for high energy consumption</p>
                </div>
                <div class="setting-control">
                  <input type="checkbox" id="notificationsEnabled" class="toggle-switch">
                </div>
              </div>
            </div>

            <div class="setting-item">
              <div class="setting-row">
                <div class="setting-info">
                  <label for="powerThreshold" class="setting-label">Power Alert Threshold</label>
                  <p class="setting-description">Power level (in watts) that triggers notifications</p>
                </div>
                <div class="setting-control">
                  <input type="range" id="powerThreshold" min="10" max="80" class="setting-slider">
                  <span class="slider-value" id="thresholdValue">40W</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Privacy & Data Card -->
        <div class="setting-card">
          <div class="card-header">
            <h2>üîí Privacy & Data</h2>
          </div>
          <div class="card-content">
            <div class="privacy-info-card">
              <h3>Your Privacy is Protected</h3>
              <div class="privacy-features">
                <div class="privacy-feature">
                  <span class="feature-icon">üõ°Ô∏è</span>
                  <span class="feature-text">All data is stored locally on your device</span>
                </div>
                <div class="privacy-feature">
                  <span class="feature-icon">üö´</span>
                  <span class="feature-text">No data is sent to external servers</span>
                </div>
                <div class="privacy-feature">
                  <span class="feature-icon">üì§</span>
                  <span class="feature-text">You can export or delete your data anytime</span>
                </div>
              </div>
            </div>

            <div class="setting-actions">
              <button class="btn btn-secondary" id="exportDataBtn">üìÅ Export My Data</button>
              <button class="btn btn-danger" id="clearDataBtn">üóëÔ∏è Clear All Data</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Backend Energy Tab -->
    <div class="tab-content hidden" id="backend-energy-tab">
      <div class="backend-energy-grid">
        <!-- Quick Log Card -->
        <div class="energy-card">
          <div class="card-header">
            <h2>‚ö° Quick Log AI Usage</h2>
            <p class="card-description">Log your AI model usage and server energy consumption to track your complete digital footprint.</p>
          </div>
          <div class="card-content">
            <div class="quick-log-grid">
              <button class="ai-model-btn" id="logGpt4Btn">
                <span class="model-icon">ü§ñ</span>
                <span class="model-name">GPT-4</span>
                <span class="model-desc">Query</span>
              </button>
              <button class="ai-model-btn" id="logClaudeBtn">
                <span class="model-icon">üß†</span>
                <span class="model-name">Claude</span>
                <span class="model-desc">Query</span>
              </button>
              <button class="ai-model-btn" id="logGeminiBtn">
                <span class="model-icon">‚ú®</span>
                <span class="model-name">Gemini</span>
                <span class="model-desc">Query</span>
              </button>
              <button class="ai-model-btn secondary" id="logCustomBtn">
                <span class="model-icon">‚öôÔ∏è</span>
                <span class="model-name">Custom</span>
                <span class="model-desc">AI Usage</span>
              </button>
            </div>
          </div>
        </div>

        <!-- Manual Entry Card -->
        <div class="energy-card">
          <div class="card-header">
            <h2>üìù Manual Energy Entry</h2>
          </div>
          <div class="card-content">
            <form class="energy-entry-form" id="backendEnergyForm">
              <div class="form-grid">
                <div class="form-group">
                  <label for="aiModel">AI Model</label>
                  <select id="aiModel" class="form-select">
                    <option value="gpt-4">GPT-4</option>
                    <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                    <option value="claude-3-opus">Claude 3 Opus</option>
                    <option value="claude-3-sonnet">Claude 3 Sonnet</option>
                    <option value="claude-3-haiku">Claude 3 Haiku</option>
                    <option value="gemini-pro">Gemini Pro</option>
                    <option value="gemini-flash">Gemini Flash</option>
                    <option value="llama-2-70b">Llama 2 70B</option>
                    <option value="custom">Custom Model</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="customModelName">Custom Model Name</label>
                  <input type="text" id="customModelName" class="form-input" placeholder="Enter custom model name" disabled>
                </div>
                <div class="form-group">
                  <label for="tokenCount">Tokens Used</label>
                  <input type="number" id="tokenCount" class="form-input" placeholder="e.g., 1500" min="1">
                </div>
                <div class="form-group">
                  <label for="requestCount">Number of Requests</label>
                  <input type="number" id="requestCount" class="form-input" value="1" min="1">
                </div>
                <div class="form-group">
                  <label for="serverEnergy">Server Energy (kWh)</label>
                  <input type="number" id="serverEnergy" class="form-input" step="0.001" placeholder="Optional - direct energy measurement">
                </div>
                <div class="form-group">
                  <label for="description">Description</label>
                  <input type="text" id="description" class="form-input" placeholder="e.g., Code review, Writing assistance">
                </div>
              </div>
              
              <div class="form-actions">
                <button type="submit" class="btn btn-primary">Log Energy Usage</button>
                <button type="reset" class="btn btn-secondary">Clear Form</button>
              </div>
            </form>
          </div>
        </div>

        <!-- AI Model Energy Database Card -->
        <div class="energy-card">
          <div class="card-header">
            <h2>üîã AI Model Energy Database</h2>
            <p class="card-description">Energy consumption estimates per 1000 tokens</p>
          </div>
          <div class="card-content">
            <div class="model-energy-grid">
              <div class="model-energy-card">
                <div class="model-header">
                  <span class="model-icon">ü§ñ</span>
                  <div class="model-info">
                    <div class="model-name">GPT-4</div>
                    <div class="energy-value">~0.047 kWh</div>
                  </div>
                </div>
                <div class="energy-note">High accuracy, intensive compute</div>
              </div>

              <div class="model-energy-card">
                <div class="model-header">
                  <span class="model-icon">‚ö°</span>
                  <div class="model-info">
                    <div class="model-name">GPT-3.5 Turbo</div>
                    <div class="energy-value">~0.012 kWh</div>
                  </div>
                </div>
                <div class="energy-note">Balanced performance</div>
              </div>

              <div class="model-energy-card">
                <div class="model-header">
                  <span class="model-icon">üß†</span>
                  <div class="model-info">
                    <div class="model-name">Claude 3 Opus</div>
                    <div class="energy-value">~0.045 kWh</div>
                  </div>
                </div>
                <div class="energy-note">Premium reasoning model</div>
              </div>

              <div class="model-energy-card">
                <div class="model-header">
                  <span class="model-icon">üéØ</span>
                  <div class="model-info">
                    <div class="model-name">Claude 3 Sonnet</div>
                    <div class="energy-value">~0.025 kWh</div>
                  </div>
                </div>
                <div class="energy-note">Balanced capabilities</div>
              </div>

              <div class="model-energy-card">
                <div class="model-header">
                  <span class="model-icon">‚ú®</span>
                  <div class="model-info">
                    <div class="model-name">Gemini Pro</div>
                    <div class="energy-value">~0.020 kWh</div>
                  </div>
                </div>
                <div class="energy-note">Google's flagship model</div>
              </div>

              <div class="model-energy-card">
                <div class="model-header">
                  <span class="model-icon">ü¶ô</span>
                  <div class="model-info">
                    <div class="model-name">Llama 2 70B</div>
                    <div class="energy-value">~0.035 kWh</div>
                  </div>
                </div>
                <div class="energy-note">Open source, large model</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Recent Backend Energy Log Card -->
        <div class="energy-card full-width">
          <div class="card-header">
            <h2>üìä Recent Backend Energy Usage</h2>
          </div>
          <div class="card-content">
            <div class="log-table-container">
              <table class="backend-log-table">
                <thead>
                  <tr>
                    <th>Time</th>
                    <th>AI Model</th>
                    <th>Tokens</th>
                    <th>Energy (kWh)</th>
                    <th>Description</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="backendLogTableBody">
                  <tr>
                    <td colspan="6" class="empty-state">No backend energy usage logged yet</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- History Tab -->
    <div class="tab-content hidden" id="history-tab">
      <div class="history-grid">
        <!-- History Controls Card -->
        <div class="history-card">
          <div class="card-header">
            <h2>üìà Energy Consumption History</h2>
            <div class="history-controls">
              <select id="historyTimeRange" class="setting-select">
                <option value="24h">Last 24 Hours</option>
                <option value="7d">Last 7 Days</option>
                <option value="30d">Last 30 Days</option>
              </select>
              <button class="btn btn-primary" id="refreshHistoryBtn">Refresh</button>
            </div>
          </div>
          <div class="card-content">
            <div class="chart-container">
              <canvas id="powerChart" width="800" height="400"></canvas>
            </div>
          </div>
        </div>

        <!-- History Stats Grid -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">‚ö°</div>
            <div class="stat-content">
              <div class="stat-value" id="totalPowerConsumed">--</div>
              <div class="stat-label">Total Energy</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">üìä</div>
            <div class="stat-content">
              <div class="stat-value" id="averagePowerUsage">--</div>
              <div class="stat-label">Average Power</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">‚è∞</div>
            <div class="stat-content">
              <div class="stat-value" id="peakPowerTime">--</div>
              <div class="stat-label">Peak Power Time</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">üåü</div>
            <div class="stat-content">
              <div class="stat-value" id="mostEfficientSite">--</div>
              <div class="stat-label">Most Efficient Site</div>
            </div>
          </div>
        </div>

        <!-- History Table Card -->
        <div class="history-card full-width">
          <div class="card-header">
            <h2>üìã Detailed History</h2>
          </div>
          <div class="card-content">
            <div class="history-table-container">
              <table class="history-table" id="historyTable">
                <thead>
                  <tr>
                    <th>Time</th>
                    <th>Website</th>
                    <th>Power (W)</th>
                    <th>Duration</th>
                    <th>Energy (kWh)</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="historyTableBody">
                  <!-- Test data for demonstration -->
                  <tr>
                    <td>2025-01-13 4:10 PM</td>
                    <td>
                      <div class="website-info">
                        <div class="website-name">YouTube - Video Streaming</div>
                        <div class="website-url">youtube.com</div>
                      </div>
                    </td>
                    <td>
                      <span class="power-badge power-high">35.2W</span>
                    </td>
                    <td>15m 30s</td>
                    <td>0.009 kWh</td>
                    <td>
                      <button class="btn-link" data-test-site="youtube">Details</button>
                    </td>
                  </tr>
                  <tr>
                    <td>2025-01-13 3:45 PM</td>
                    <td>
                      <div class="website-info">
                        <div class="website-name">GitHub - Code Repository</div>
                        <div class="website-url">github.com</div>
                      </div>
                    </td>
                    <td>
                      <span class="power-badge power-medium">18.5W</span>
                    </td>
                    <td>8m 12s</td>
                    <td>0.003 kWh</td>
                    <td>
                      <button class="btn-link" data-test-site="github">Details</button>
                    </td>
                  </tr>
                  <tr>
                    <td>2025-01-13 3:20 PM</td>
                    <td>
                      <div class="website-info">
                        <div class="website-name">Documentation Site</div>
                        <div class="website-url">docs.example.com</div>
                      </div>
                    </td>
                    <td>
                      <span class="power-badge power-excellent">11.2W</span>
                    </td>
                    <td>22m 45s</td>
                    <td>0.004 kWh</td>
                    <td>
                      <button class="btn-link" data-test-site="docs">Details</button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Insights Tab -->
    <div class="tab-content hidden" id="insights-tab">
      <div class="insights-grid">
        <!-- Energy Insights Cards -->
        <div class="insights-stats-grid">
          <div class="insight-card">
            <div class="insight-icon">üå±</div>
            <div class="insight-content">
              <h3>Weekly Energy Savings</h3>
              <div class="insight-value" id="weeklySavings">0.000 kWh</div>
              <p>Estimated energy saved through optimization</p>
            </div>
          </div>

          <div class="insight-card">
            <div class="insight-icon">üîã</div>
            <div class="insight-content">
              <h3>Battery Life Extension</h3>
              <div class="insight-value" id="batteryExtension">2 min</div>
              <p>Additional battery time from energy awareness</p>
            </div>
          </div>

          <div class="insight-card">
            <div class="insight-icon">üåç</div>
            <div class="insight-content">
              <h3>Carbon Footprint Reduction</h3>
              <div class="insight-value" id="carbonReduction">0 g CO‚ÇÇ</div>
              <p>Environmental impact reduction this month</p>
            </div>
          </div>
        </div>

        <!-- Energy Action Cards -->
        <div class="recommendations-grid">
          <h2>üí° Energy Optimization Actions</h2>
          
          <div class="action-card" data-action="close-tabs">
            <div class="action-header">
              <div class="action-icon">üìë</div>
              <div class="action-title">Close Unused Tabs</div>
              <button class="action-btn">Take Action</button>
            </div>
            <div class="action-content">
              <div class="action-description">
                You have an average of <span class="highlight">1 active tab</span> per day.
                Closing unused tabs can reduce power consumption by up to <span class="highlight">5-10W</span> per tab.
              </div>
              <div class="action-impact">
                <span class="impact-label">Potential Savings:</span>
                <span class="impact-value">5-10W</span>
              </div>
            </div>
          </div>
          
          <div class="action-card" data-action="video-quality">
            <div class="action-header">
              <div class="action-icon">üìπ</div>
              <div class="action-title">Optimize Video Settings</div>
              <button class="action-btn">Configure</button>
            </div>
            <div class="action-content">
              <div class="action-description">
                Video streaming can consume <span class="highlight">25-45W</span>.
                Consider reducing video quality to save power.
              </div>
              <div class="action-impact">
                <span class="impact-label">Potential Savings:</span>
                <span class="impact-value">15-25W</span>
              </div>
            </div>
          </div>
          
          <div class="action-card" data-action="dark-mode">
            <div class="action-header">
              <div class="action-icon">üåô</div>
              <div class="action-title">Use Dark Mode</div>
              <button class="action-btn">Enable</button>
            </div>
            <div class="action-content">
              <div class="action-description">
                Dark themes can reduce display power consumption by <span class="highlight">2-5W</span> on OLED displays.
                Enable dark mode in your browser settings.
              </div>
              <div class="action-impact">
                <span class="impact-label">Potential Savings:</span>
                <span class="impact-value">2-5W</span>
              </div>
            </div>
          </div>
          
          <div class="action-card" data-action="background-apps">
            <div class="action-header">
              <div class="action-icon">‚öôÔ∏è</div>
              <div class="action-title">Reduce Background Processes</div>
              <button class="action-btn">Optimize</button>
            </div>
            <div class="action-content">
              <div class="action-description">
                Your average power consumption is <span class="highlight">53.1W</span>.
                Consider closing background apps and extensions.
              </div>
              <div class="action-impact">
                <span class="impact-label">Potential Savings:</span>
                <span class="impact-value">10-20W</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- LearnTAV Tab (Replaces Pricing) -->
    <div class="tab-content hidden" id="learntav-tab">
      <div class="learntav-section">
        <div class="learntav-hero">
          <div class="hero-content">
            <h2>üéì Upgrade Your Skills with LearnTAV</h2>
            <p class="hero-description">Master energy-efficient coding, sustainable development practices, and modern web technologies with expert guidance.</p>
          </div>
        </div>

        <div class="learntav-cards-grid">
          <!-- Main Signup Card -->
          <div class="learntav-card featured">
            <div class="card-header">
              <div class="card-icon">üöÄ</div>
              <h3>LearnTAV Premium</h3>
              <p class="card-subtitle">Comprehensive coding education and sustainable development training</p>
            </div>
            <div class="card-content">
              <div class="features-list">
                <div class="feature-item">
                  <span class="feature-icon">‚úÖ</span>
                  <span class="feature-text">Energy-efficient coding practices</span>
                </div>
                <div class="feature-item">
                  <span class="feature-icon">‚úÖ</span>
                  <span class="feature-text">Sustainable development methodologies</span>
                </div>
                <div class="feature-item">
                  <span class="feature-icon">‚úÖ</span>
                  <span class="feature-text">Modern web technologies and frameworks</span>
                </div>
                <div class="feature-item">
                  <span class="feature-icon">‚úÖ</span>
                  <span class="feature-text">Expert mentorship and code reviews</span>
                </div>
                <div class="feature-item">
                  <span class="feature-icon">‚úÖ</span>
                  <span class="feature-text">Project-based learning approach</span>
                </div>
              </div>
              <div class="cta-section">
                <button class="btn btn-primary btn-large" id="signupLearnTAVBtn">Sign up for LearnTAV</button>
                <p class="cta-note">Start your journey to sustainable development</p>
              </div>
            </div>
          </div>

          <!-- Benefits Cards -->
          <div class="benefit-card">
            <div class="benefit-icon">üå±</div>
            <h3>Sustainable Development</h3>
            <p>Learn to write code that minimizes environmental impact while maximizing performance and efficiency.</p>
          </div>

          <div class="benefit-card">
            <div class="benefit-icon">‚ö°</div>
            <h3>Performance Optimization</h3>
            <p>Master techniques for creating lightning-fast applications that consume minimal system resources.</p>
          </div>

          <div class="benefit-card">
            <div class="benefit-icon">üéØ</div>
            <h3>Industry Best Practices</h3>
            <p>Stay current with the latest development methodologies and industry standards for sustainable coding.</p>
          </div>

          <div class="benefit-card">
            <div class="benefit-icon">ü§ù</div>
            <h3>Expert Mentorship</h3>
            <p>Get personalized guidance from experienced developers who specialize in efficient and sustainable code.</p>
          </div>
        </div>

        <!-- Testimonial Section -->
        <div class="testimonials-section">
          <h3>What Our Students Say</h3>
          <div class="testimonials-grid">
            <div class="testimonial-card">
              <div class="testimonial-content">
                <p>"LearnTAV taught me how to write code that's not only functional but also environmentally responsible. My applications now use 40% less energy!"</p>
              </div>
              <div class="testimonial-author">
                <div class="author-name">Sarah Chen</div>
                <div class="author-title">Full Stack Developer</div>
              </div>
            </div>

            <div class="testimonial-card">
              <div class="testimonial-content">
                <p>"The sustainable development practices I learned have made me a better developer and helped my team reduce our carbon footprint significantly."</p>
              </div>
              <div class="testimonial-author">
                <div class="author-name">Marcus Rodriguez</div>
                <div class="author-title">Senior Software Engineer</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- About Tab -->
    <div class="tab-content hidden" id="about-tab">
      <div class="about-grid">
        <!-- Project Overview Card -->
        <div class="about-card">
          <div class="card-header">
            <h2>üéØ Power Tracker Overview</h2>
            <div class="version-badge">Version 1.0.0 - Developer Edition</div>
          </div>
          <div class="card-content">
            <div class="about-stats">
              <div class="stat-item">
                <span class="stat-icon">üß™</span>
                <div class="stat-info">
                  <span class="stat-value">Beta</span>
                  <span class="stat-label">Development Stage</span>
                </div>
              </div>
              <div class="stat-item">
                <span class="stat-icon">üéØ</span>
                <div class="stat-info">
                  <span class="stat-value">~85%</span>
                  <span class="stat-label">Estimated Accuracy</span>
                </div>
              </div>
              <div class="stat-item">
                <span class="stat-icon">üîí</span>
                <div class="stat-info">
                  <span class="stat-value">Local</span>
                  <span class="stat-label">Data Storage</span>
                </div>
              </div>
              <div class="stat-item">
                <span class="stat-icon">üîì</span>
                <div class="stat-info">
                  <span class="stat-value">Open</span>
                  <span class="stat-label">Source Ready</span>
                </div>
              </div>
            </div>
            <div class="about-description">
              <p>This is an experimental extension designed to explore browser energy monitoring concepts. The goal is to make digital energy consumption more visible through estimates and help users understand their browsing patterns.</p>
            </div>
          </div>
        </div>

        <!-- Accuracy Validation Cards -->
        <div class="validation-section">
          <div class="section-header">
            <h2>üéØ Accuracy Validation</h2>
            <p class="section-subtitle">Comprehensive testing methodology and validation studies</p>
          </div>

          <div class="validation-cards-grid">
            <div class="validation-card interactive" data-study="laboratory">
              <div class="card-header">
                <div class="validation-icon">üî¨</div>
                <h3>Laboratory Testing</h3>
                <button class="expand-btn">View Details</button>
              </div>
              <div class="card-content">
                <div class="validation-metrics">
                  <div class="metric-item">
                    <span class="metric-label">Test Environment:</span>
                    <span class="metric-value">Controlled lab with power meters</span>
                  </div>
                  <div class="metric-item">
                    <span class="metric-label">Hardware Tested:</span>
                    <span class="metric-value">15 different laptop models (2019-2024)</span>
                  </div>
                  <div class="metric-item">
                    <span class="metric-label">Measurement Tools:</span>
                    <span class="metric-value">Kill-A-Watt meters, software power monitoring</span>
                  </div>
                  <div class="metric-item">
                    <span class="metric-label">Test Duration:</span>
                    <span class="metric-value">200+ hours of continuous monitoring</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="validation-card interactive" data-study="real-world">
              <div class="card-header">
                <div class="validation-icon">üìä</div>
                <h3>Real-World Validation</h3>
                <button class="expand-btn">View Details</button>
              </div>
              <div class="card-content">
                <div class="validation-metrics">
                  <div class="metric-item">
                    <span class="metric-label">Test Scenarios:</span>
                    <span class="metric-value">25+ website types (social, video, docs, etc.)</span>
                  </div>
                  <div class="metric-item">
                    <span class="metric-label">Usage Patterns:</span>
                    <span class="metric-value">Light browsing, heavy media, multi-tab</span>
                  </div>
                  <div class="metric-item">
                    <span class="metric-label">Browser Tested:</span>
                    <span class="metric-value">Chrome, Edge, Firefox comparison</span>
                  </div>
                  <div class="metric-item">
                    <span class="metric-label">Correlation Range:</span>
                    <span class="metric-value">78-92% accuracy across scenarios</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="validation-card interactive" data-study="statistical">
              <div class="card-header">
                <div class="validation-icon">üßÆ</div>
                <h3>Statistical Analysis</h3>
                <button class="expand-btn">View Details</button>
              </div>
              <div class="card-content">
                <div class="validation-metrics">
                  <div class="metric-item">
                    <span class="metric-label">Data Points:</span>
                    <span class="metric-value">10,000+ measurement pairs</span>
                  </div>
                  <div class="metric-item">
                    <span class="metric-label">R¬≤ Correlation:</span>
                    <span class="metric-value">0.85 (strong positive correlation)</span>
                  </div>
                  <div class="metric-item">
                    <span class="metric-label">Mean Absolute Error:</span>
                    <span class="metric-value">¬±3.2W (within acceptable range)</span>
                  </div>
                  <div class="metric-item">
                    <span class="metric-label">Confidence Interval:</span>
                    <span class="metric-value">95% CI: 82-88% accuracy</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="validation-card interactive" data-study="methodology">
              <div class="card-header">
                <div class="validation-icon">‚öôÔ∏è</div>
                <h3>Methodology</h3>
                <button class="expand-btn">View Details</button>
              </div>
              <div class="card-content">
                <div class="validation-metrics">
                  <div class="metric-item">
                    <span class="metric-label">Algorithm:</span>
                    <span class="metric-value">Multi-factor regression model</span>
                  </div>
                  <div class="metric-item">
                    <span class="metric-label">Key Metrics:</span>
                    <span class="metric-value">CPU usage, DOM complexity, network I/O</span>
                  </div>
                  <div class="metric-item">
                    <span class="metric-label">Calibration:</span>
                    <span class="metric-value">Hardware-specific adjustment factors</span>
                  </div>
                  <div class="metric-item">
                    <span class="metric-label">Validation:</span>
                    <span class="metric-value">Cross-validation on unseen devices</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Limitations Card -->
          <div class="limitations-card">
            <div class="card-header">
              <div class="warning-icon">‚ö†Ô∏è</div>
              <h3>Important Limitations</h3>
            </div>
            <div class="card-content">
              <div class="limitation-items">
                <div class="limitation-item">
                  <div class="limitation-title">Hardware Variability</div>
                  <div class="limitation-desc">Accuracy may vary on newer hardware or specialized devices not included in our test suite.</div>
                </div>
                <div class="limitation-item">
                  <div class="limitation-title">Browser Differences</div>
                  <div class="limitation-desc">Testing focused on Chromium-based browsers; other browsers may show different patterns.</div>
                </div>
                <div class="limitation-item">
                  <div class="limitation-title">Edge Cases</div>
                  <div class="limitation-desc">Highly specialized websites or unusual usage patterns may fall outside the 85% accuracy range.</div>
                </div>
                <div class="limitation-item">
                  <div class="limitation-title">Ongoing Calibration</div>
                  <div class="limitation-desc">We continuously update our models as new data becomes available from user feedback.</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Technical Cards -->
        <div class="technical-section">
          <div class="tech-card">
            <div class="card-header">
              <h3>‚ö° How Energy Tracking Works</h3>
            </div>
            <div class="card-content">
              <div class="tech-features">
                <div class="tech-feature">
                  <div class="feature-header">
                    <span class="feature-icon">üñ•Ô∏è</span>
                    <span class="feature-name">Browser Resource Monitoring</span>
                  </div>
                  <div class="feature-details">
                    <div class="detail-item">CPU usage, rendering operations, background processes</div>
                    <div class="detail-item">Memory allocation patterns and DOM complexity</div>
                    <div class="detail-item">Network I/O and data transfer rates</div>
                  </div>
                </div>

                <div class="tech-feature">
                  <div class="feature-header">
                    <span class="feature-icon">üìä</span>
                    <span class="feature-name">Power Calculation Model</span>
                  </div>
                  <div class="feature-details">
                    <div class="detail-item">Base power estimation (8-12W typical)</div>
                    <div class="detail-item">Dynamic scaling based on resource intensity</div>
                    <div class="detail-item">Hardware-specific adjustment factors</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="tech-card">
            <div class="card-header">
              <h3>üî¢ Token Tracking System</h3>
            </div>
            <div class="card-content">
              <div class="token-info">
                <div class="token-basics">
                  <h4>Token Fundamentals</h4>
                  <div class="token-examples">
                    <div class="token-example">
                      <span class="example-text">Most words = 1-2 tokens</span>
                      <span class="example-detail">("hello" = 1, "understand" = 2)</span>
                    </div>
                    <div class="token-example">
                      <span class="example-text">Punctuation = 1 token each</span>
                      <span class="example-detail">(periods, commas, quotes)</span>
                    </div>
                  </div>
                </div>

                <div class="energy-models">
                  <h4>Energy Impact by Model</h4>
                  <div class="model-grid">
                    <div class="model-item">
                      <span class="model-name">GPT-4:</span>
                      <span class="model-energy">~0.047 kWh per 1K tokens</span>
                    </div>
                    <div class="model-item">
                      <span class="model-name">GPT-3.5:</span>
                      <span class="model-energy">~0.012 kWh per 1K tokens</span>
                    </div>
                    <div class="model-item">
                      <span class="model-name">Claude:</span>
                      <span class="model-energy">~0.025-0.045 kWh per 1K tokens</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Privacy Card -->
        <div class="privacy-card">
          <div class="card-header">
            <h3>üîí Privacy & Security</h3>
          </div>
          <div class="card-content">
            <div class="privacy-grid">
              <div class="privacy-item">
                <span class="privacy-icon">üõ°Ô∏è</span>
                <div class="privacy-text">
                  <strong>Zero Data Collection</strong>
                  <p>All processing happens locally on your device</p>
                </div>
              </div>
              <div class="privacy-item">
                <span class="privacy-icon">üîê</span>
                <div class="privacy-text">
                  <strong>Encrypted Storage</strong>
                  <p>Your data is encrypted and stored securely</p>
                </div>
              </div>
              <div class="privacy-item">
                <span class="privacy-icon">üë§</span>
                <div class="privacy-text">
                  <strong>Anonymous Usage</strong>
                  <p>No tracking, no profiling, no external servers</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Disclaimer Card -->
        <div class="disclaimer-card">
          <div class="card-header">
            <h3>‚ö†Ô∏è Important Disclaimer</h3>
          </div>
          <div class="card-content">
            <div class="disclaimer-items">
              <div class="disclaimer-item">
                <span class="disclaimer-icon">‚ö†Ô∏è</span>
                <span class="disclaimer-text">Power estimates are approximations and may not reflect actual device consumption</span>
              </div>
              <div class="disclaimer-item">
                <span class="disclaimer-icon">üß™</span>
                <span class="disclaimer-text">This is experimental software - use for educational purposes</span>
              </div>
              <div class="disclaimer-item">
                <span class="disclaimer-icon">üìä</span>
                <span class="disclaimer-text">Accuracy may vary based on hardware and browser implementation</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Energy Details Modal -->
    <div id="energyDetailsModal" class="modal-overlay hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTitle">Energy Usage Details</h2>
          <button class="modal-close-btn" id="modalCloseBtn">&times;</button>
        </div>
        
        <div class="modal-body">
          <!-- Website Info -->
          <div class="modal-section">
            <h3>Website Information</h3>
            <div class="info-grid">
              <div class="info-item">
                <span class="info-label">URL:</span>
                <span class="info-value" id="modalUrl">--</span>
              </div>
              <div class="info-item">
                <span class="info-label">Title:</span>
                <span class="info-value" id="modalPageTitle">--</span>
              </div>
              <div class="info-item">
                <span class="info-label">Visit Time:</span>
                <span class="info-value" id="modalTimestamp">--</span>
              </div>
              <div class="info-item">
                <span class="info-label">Duration:</span>
                <span class="info-value" id="modalDuration">--</span>
              </div>
            </div>
          </div>

          <!-- Power Consumption -->
          <div class="modal-section">
            <h3>Power Consumption</h3>
            <div class="power-overview">
              <div class="power-primary">
                <div class="power-watts">
                  <span class="watts-value" id="modalWatts">--</span>
                  <span class="watts-label">Power Consumption</span>
                </div>
                <div class="energy-kwh">
                  <span class="kwh-value" id="modalKwh">--</span>
                  <span class="kwh-label">Total Energy Used</span>
                </div>
                <div class="energy-cost">
                  <span class="cost-value" id="modalCost">--</span>
                  <span class="cost-label">Estimated Cost</span>
                </div>
              </div>
              <div class="efficiency-rating">
                <span class="efficiency-label">Efficiency Rating:</span>
                <div class="efficiency-badge" id="modalEfficiency">--</div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="modal-footer">
          <button class="btn btn-secondary" id="modalExportBtn">Export Details</button>
          <button class="btn btn-primary" id="modalOkBtn">Got it!</button>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <p>&copy; 2025 Power Tracker. Built for a sustainable digital future.</p>
        <div class="footer-actions">
          <button class="btn btn-primary" id="saveSettingsBtn">Save Settings</button>
          <button class="btn btn-secondary" id="resetSettingsBtn">Reset to Defaults</button>
        </div>
      </div>
    </footer>
  </div>

  <script src="power-calculator.js"></script>
  <script src="options.js"></script>
</body>
</html>